<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>📝 Use Pages | Camomilla</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;📑&lt;/text&gt;&lt;/svg&gt;">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css">
    <meta name="description" content="Just playing around with flowers">
    
    <link rel="preload" href="/camomilla/assets/css/0.styles.f4c84754.css" as="style"><link rel="preload" href="/camomilla/assets/js/app.7f50c2db.js" as="script"><link rel="preload" href="/camomilla/assets/js/2.1039ee58.js" as="script"><link rel="preload" href="/camomilla/assets/js/18.550f99d7.js" as="script"><link rel="preload" href="/camomilla/assets/js/7.c85fd2d1.js" as="script"><link rel="prefetch" href="/camomilla/assets/js/10.84e87db0.js"><link rel="prefetch" href="/camomilla/assets/js/11.94790f85.js"><link rel="prefetch" href="/camomilla/assets/js/12.46006b14.js"><link rel="prefetch" href="/camomilla/assets/js/13.94a2f9df.js"><link rel="prefetch" href="/camomilla/assets/js/14.b42d6ead.js"><link rel="prefetch" href="/camomilla/assets/js/15.ef4b2a02.js"><link rel="prefetch" href="/camomilla/assets/js/16.a73ed372.js"><link rel="prefetch" href="/camomilla/assets/js/17.d2114300.js"><link rel="prefetch" href="/camomilla/assets/js/19.b52370aa.js"><link rel="prefetch" href="/camomilla/assets/js/20.3a07e5e5.js"><link rel="prefetch" href="/camomilla/assets/js/21.8e84ab1c.js"><link rel="prefetch" href="/camomilla/assets/js/3.986bcd4b.js"><link rel="prefetch" href="/camomilla/assets/js/4.31a33c9f.js"><link rel="prefetch" href="/camomilla/assets/js/5.c71a19d6.js"><link rel="prefetch" href="/camomilla/assets/js/6.1eaa0394.js"><link rel="prefetch" href="/camomilla/assets/js/8.969a0d73.js"><link rel="prefetch" href="/camomilla/assets/js/9.b00ea9bc.js">
    <link rel="stylesheet" href="/camomilla/assets/css/0.styles.f4c84754.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/camomilla/" class="home-link router-link-active"><!----> <span class="site-name">Camomilla</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/camomilla/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/camomilla/How%20To/" class="nav-link">
  How to
</a></div><div class="nav-item"><a href="https://camomilla.lotrek.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <a href="https://github.com/lotrekagency/camomilla" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/camomilla/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/camomilla/How%20To/" class="nav-link">
  How to
</a></div><div class="nav-item"><a href="https://camomilla.lotrek.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <a href="https://github.com/lotrekagency/camomilla" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/camomilla/" aria-current="page" class="sidebar-link">Home</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/camomilla/How to/" class="sidebar-heading clickable open"><span>How to</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/camomilla/How%20to/Bootstrap%20your%20project/" class="sidebar-link">🚀 Bootstrap your project</a></li><li><a href="/camomilla/How%20to/Use%20API/" class="sidebar-link">🐝 Use API</a></li><li><a href="/camomilla/How%20to/Use%20Media/" class="sidebar-link">🖼️ Use Media</a></li><li><a href="/camomilla/How%20to/Use%20Menu/" class="sidebar-link">🍜 Use Menu</a></li><li><a href="/camomilla/How%20to/Use%20Modeltranslation/" class="sidebar-link">🎭 Use Modeltranslation</a></li><li><a href="/camomilla/How%20to/Use%20Pages%20Context/" class="sidebar-link">🧩 Use Pages Context</a></li><li><a href="/camomilla/How%20to/Use%20Pages/" aria-current="page" class="active sidebar-link">📝 Use Pages</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/camomilla/How%20to/Use%20Pages/#📎-the-page-model" class="sidebar-link">📎 The Page Model</a></li><li class="sidebar-sub-header"><a href="/camomilla/How%20to/Use%20Pages/#🖇️-the-abstractpage-model" class="sidebar-link">🖇️ The AbstractPage Model</a></li><li class="sidebar-sub-header"><a href="/camomilla/How%20to/Use%20Pages/#🌐-build-a-sitemap-xml" class="sidebar-link">🌐 Build a sitemap.xml</a></li><li class="sidebar-sub-header"><a href="/camomilla/How%20to/Use%20Pages/#🗂️-pages-router-api-endpoint" class="sidebar-link">🗂️ Pages router API endpoint</a></li></ul></li><li><a href="/camomilla/How%20to/Use%20Settings/" class="sidebar-link">⚙️ Use Settings</a></li><li><a href="/camomilla/How%20to/Use%20StructuredJSONField/" class="sidebar-link">🧬 Use Structured JSON Field</a></li></ul></section></li><li><a href="/camomilla/Changelog/" class="sidebar-link">CHANGELOG</a></li><li><a href="/camomilla/Contribute/" class="sidebar-link">How to contribute</a></li></ul> </aside> <main class="page"> <div class="theme-succinct-content content__default"><h1 id="📝-use-pages"><a href="#📝-use-pages" class="header-anchor">#</a> 📝 Use Pages</h1> <h2 id="📎-the-page-model"><a href="#📎-the-page-model" class="header-anchor">#</a> 📎 The Page Model</h2> <p>Camomilla has it's own page model. The page model has an attribute for every relevant data in a web page. It takes care of SEO data and permalinks and template, and exposes jsonfields to manage additional data.</p> <p>To use camomilla pages you need to add the dynamic url resolver at the end of your website urlpatterns:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># &lt;project_name&gt;/urls.py</span>
urlpatterns <span class="token operator">+=</span> path<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">&quot;camomilla.dynamic_pages_urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>To handle multilanguage pages use:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># &lt;project_name&gt;/urls.py</span>
urlpatterns <span class="token operator">+=</span> i18n_patterns<span class="token punctuation">(</span>
    path<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">&quot;camomilla.dynamic_pages_urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    prefix_default_language<span class="token operator">=</span><span class="token boolean">False</span>
<span class="token punctuation">)</span>
</code></pre></div><p>This resolver is made to check any permalink that does not match anything in the url pattern and look in the database for a page with that permalink.</p> <div class="custom-block warning"><p class="custom-block-title">⚠️ Beware!</p> <p>The <code>dynamic_pages_urls</code> handler should always be the last handler of your urlpatterns list.</p></div> <h3 id="choose-the-template"><a href="#choose-the-template" class="header-anchor">#</a> Choose the template</h3> <p>The page model has a field that determines which html template to use for rendering.
The default value is <code>defaults/pages/default.html</code>. If a value is stored in this field it will be used. The rendering part is yelded by the default <a href="https://docs.djangoproject.com/en/4.2/topics/templates/" target="_blank" rel="noopener noreferrer">django template engine<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
The default value can be changed with a setting:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># &lt;project_name&gt;/settings.py</span>
CAMOMILLA <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;RENDER&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;PAGE&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&quot;DEFAULT_TEMPLATE&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;website/my_template.html&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="add-template-data"><a href="#add-template-data" class="header-anchor">#</a> Add template data</h3> <div class="custom-block warning"><p class="custom-block-title">⚠️ Beware!</p> <p><a href="/camomilla/How to/Use Pages Context/">🧩 Use Page Context</a> to inject context in a more safe way.</p></div> <p>The data that will be available in the rendering engine should be saved in the template_data field. This field is a django JSONField. So it will accept any json structure.
The data in this field will be accessible inside the template through <code>page.template_data</code>.
If you need to enrich the template context with other data that are not stored in the template data you can provide an <code>inject_context</code> function in camomilla settings:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># &lt;project_name&gt;/settings.py</span>

<span class="token comment"># import from external file</span>
<span class="token keyword">from</span> my_project_app<span class="token punctuation">.</span>template_rendering <span class="token keyword">import</span> page_inject_context

<span class="token comment"># or define explicitly in settings</span>
<span class="token keyword">def</span> <span class="token function">page_inject_context</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> super_ctx<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">from</span> my_project_app<span class="token punctuation">.</span>models <span class="token keyword">import</span> Category
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">&quot;all_categories&quot;</span><span class="token punctuation">:</span> Category<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token comment"># the all_category values will be accessible inside the template context.</span>


CAMOMILLA <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;RENDER&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;PAGE&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&quot;INJECT_CONTEXT&quot;</span><span class="token punctuation">:</span> page_inject_context <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="set-the-permalink"><a href="#set-the-permalink" class="header-anchor">#</a> Set the permalink</h3> <p>By default camomilla Page gives you the possibility to define the page <code>slug</code> field only.
The permalink will be generated from page <code>slug</code> and <code>parent_page</code> field.
With parent page field you can set a parent-child structure to pages.</p> <p>For example to generate the permalink <code>slug1/slug2</code> you will need to create 2 Pages, one with slug <code>slug1</code> and one with the slug <code>slug2</code> then set the first page as the parent page of the second.</p> <h2 id="🖇️-the-abstractpage-model"><a href="#🖇️-the-abstractpage-model" class="header-anchor">#</a> 🖇️ The AbstractPage Model</h2> <p>Camomilla comes with an <code>AbstractPage</code> model. AbstractPage is different from Page model, it is Abstract.
This means that the AbstractPage by itself does not create a database table. The only whay an AbstractPage can have its own db table is to be inherited by a concrete model like this:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> camomilla<span class="token punctuation">.</span>models <span class="token keyword">import</span> AbstractPage

<span class="token keyword">class</span> <span class="token class-name">MyPageModel</span><span class="token punctuation">(</span>AbstractPage<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># ... custom logic there</span>
    <span class="token keyword">pass</span>

</code></pre></div><p>The AbstractPage contains all the logics of Page model. This means that you can override anything and define multiple custom page models. This is very usefull if you need to build complex sites, where you can have also other kid of data that need to be rendered and treated like a page (es. product, category, blog, anything..).</p> <p>You can also define some intresting properties when you are defining your own page model.:</p> <h3 id="define-page-options-with-pagemeta"><a href="#define-page-options-with-pagemeta" class="header-anchor">#</a> Define page options with PageMeta</h3> <p>Many &quot;settings&quot; of the page model are stored inside a <code>PageMeta</code> class like this:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> camomilla<span class="token punctuation">.</span>models <span class="token keyword">import</span> AbstractPage

<span class="token keyword">class</span> <span class="token class-name">MyPageModel</span><span class="token punctuation">(</span>AbstractPage<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">PageMeta</span><span class="token punctuation">:</span>
        parent_page_field <span class="token operator">=</span> <span class="token string">&quot;parent_page&quot;</span>
        default_template <span class="token operator">=</span> <span class="token string">&quot;website/my_template.html&quot;</span>
        <span class="token keyword">def</span> <span class="token function">inject_context_func</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> super_ctx<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">from</span> my_project_app<span class="token punctuation">.</span>models <span class="token keyword">import</span> Category
            <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">&quot;all_categories&quot;</span><span class="token punctuation">:</span> Category<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre></div><p>From PageMeta class you can define:</p> <ul><li><code>parent_page_field</code> ==&gt; set a different propery to store page parent. Like <code>category</code> or anything else.</li> <li><code>default_template</code> ==&gt; set a different default template.</li> <li><code>inject_context_func</code> ==&gt; add more data inside template context</li></ul> <div class="custom-block warning"><p class="custom-block-title">⚠️ Beware!</p> <p><a href="/camomilla/How to/Use Pages Context/">🧩 Use Page Context</a> to inject context in a more safe way.</p></div> <h3 id="override-the-page-context"><a href="#override-the-page-context" class="header-anchor">#</a> Override the page context</h3> <p>This has almost the same functionality of <code>inject_context_func</code> PageMeta option but it runs at a more deep level. Overriding this will override the context and not only add things to it.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> camomilla<span class="token punctuation">.</span>models <span class="token keyword">import</span> AbstractPage

<span class="token keyword">class</span> <span class="token class-name">MyPageModel</span><span class="token punctuation">(</span>AbstractPage<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get_context</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">from</span> my_project_app<span class="token punctuation">.</span>models <span class="token keyword">import</span> Category
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">&quot;page&quot;</span><span class="token punctuation">:</span> self<span class="token punctuation">,</span> <span class="token string">&quot;all_categories&quot;</span><span class="token punctuation">:</span> Category<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre></div><p>We suggest to always return <code>{ &quot;page&quot;: self }</code> in the context.</p> <h2 id="🌐-build-a-sitemap-xml"><a href="#🌐-build-a-sitemap-xml" class="header-anchor">#</a> 🌐 Build a sitemap.xml</h2> <p>To build a sitemap.xml you can use the standard django sitemap framework. Camomilla comes with a <code>CamomillaPageSitemap</code> class that you can use to include camomilla pages in your sitemap.xml.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># &lt;project_name&gt;/sitemap.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>sitemaps <span class="token keyword">import</span> Sitemap
<span class="token keyword">from</span> camomilla<span class="token punctuation">.</span>sitemaps <span class="token keyword">import</span> CamomillaPageSitemap

<span class="token comment"># declare your custom sitemaps</span>
<span class="token keyword">class</span> <span class="token class-name">StaticViewSitemap</span><span class="token punctuation">(</span>Sitemap<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">items</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'home'</span><span class="token punctuation">,</span> <span class="token string">'about'</span><span class="token punctuation">,</span> <span class="token string">'contact'</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">location</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span>item<span class="token punctuation">)</span>

sitemaps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'pages'</span><span class="token punctuation">:</span> CamomillaPageSitemap<span class="token punctuation">,</span> <span class="token comment"># add the camomilla sitemap</span>
    <span class="token string">'static'</span><span class="token punctuation">:</span> StaticViewSitemap<span class="token punctuation">,</span> <span class="token comment"># add your custom sitemaps to the camomilla sitemaps</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># &lt;project_name&gt;/urls.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>sitemaps<span class="token punctuation">.</span>views <span class="token keyword">import</span> sitemap
<span class="token keyword">from</span> <span class="token punctuation">.</span>sitemap <span class="token keyword">import</span> sitemaps

urlpatterns <span class="token operator">+=</span> <span class="token punctuation">[</span>
    path<span class="token punctuation">(</span><span class="token string">'sitemap.xml'</span><span class="token punctuation">,</span> sitemap<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'sitemaps'</span><span class="token punctuation">:</span> sitemaps<span class="token punctuation">}</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'django.contrib.sitemaps.views.sitemap'</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><p>To customize the camomilla sitemap you can override the <code>CamomillaPageSitemap</code> class. Overriding this class will allow you to customize changefreq, priority and also items.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> camomilla<span class="token punctuation">.</span>sitemaps <span class="token keyword">import</span> CamomillaPageSitemap

<span class="token keyword">class</span> <span class="token class-name">MyCamomillaPageSitemap</span><span class="token punctuation">(</span>CamomillaPageSitemap<span class="token punctuation">)</span><span class="token punctuation">:</span>
    changefreq <span class="token operator">=</span> <span class="token string">&quot;monthly&quot;</span>
    priority <span class="token operator">=</span> <span class="token number">0.5</span>

    <span class="token keyword">def</span> <span class="token function">items</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>status<span class="token operator">=</span><span class="token string">&quot;PUB&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>Remember that items is a queryset of <code>UrlNode</code> objects and to access the page model you need to use the <code>page</code> property of the <code>UrlNode</code> object.</p> <h2 id="🗂️-pages-router-api-endpoint"><a href="#🗂️-pages-router-api-endpoint" class="header-anchor">#</a> 🗂️ Pages router API endpoint</h2> <div class="custom-block warning"><p class="custom-block-title">⚠️ Beware!</p> <p>If you need to create an api endpoint for a model inheriting from the <code>AbstractPage</code> model remember to use inside the serializer the <code>AbstractPageMixin</code>.</p></div> <p>Camomilla comes with a builtin pages router endpoint that allows you to browse your pages by url.</p> <p><strong>URL Structure:</strong></p> <ul><li><code>api/camomilla/pages-router/&lt;page_url&gt;</code></li></ul> <p>You can provide as the page_url parameter the full url of the page without language prefix.
The language you want to match against is taken from the request params.
If no language is specified, the default language is used.</p> <p>To specify the language in the request params you can use the <code>lang</code> parameter:</p> <p><code>/api/camomilla/pages-router/&lt;page_url&gt;?lang=en</code></p> <p>When you try to get a page from the url, the router will always take in to account the active language.
If you are trying to get a page with a certain language, make sure to set the language in the request params.
If the specified url is not present in current language, the router endpoint will return a 404 error.</p> <p><strong>Simple Response:</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;is_public&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DRF&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;indexable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;alternates&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;it&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;en&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/en/&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;permalink&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;related_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;camomilla_page&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;breadcrumbs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;permalink&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;routerlink&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;template&quot;</span><span class="token operator">:</span> <span class="token string">&quot;website/home.html&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;og_description&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;og_title&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;og_type&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;og_url&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;canonical&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;meta&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;date_created&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-09-07T13:16:24.762269Z&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;date_updated_at&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-09-08T17:38:03.155480Z&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;breadcrumbs_title&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;slug&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;template_data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;identifier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4ee68c88-dd1a-4515-bf50-7839f2cf1e72&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;pubblication_date&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ordering&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;og_image&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;url_node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">46</span><span class="token punctuation">,</span>
    <span class="token property">&quot;permalink&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;related_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;camomilla_page&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;parent_page&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The respose will not include field translations since the response has the content already translated in the active language.
But if you need also some other language you can specify the <code>included_translations</code> parameter in the request.</p> <p><code>/api/camomilla/pages-router/&lt;page_url&gt;?included_translations=it</code></p> <p>The <code>included_translations</code> parameter accepts a comma separated list of languages or the value <code>all</code> to include all the translations.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><div style="visibility:hidden;display:none;"></div></div></div>
    <script src="/camomilla/assets/js/app.7f50c2db.js" defer></script><script src="/camomilla/assets/js/2.1039ee58.js" defer></script><script src="/camomilla/assets/js/18.550f99d7.js" defer></script><script src="/camomilla/assets/js/7.c85fd2d1.js" defer></script>
  </body>
</html>
